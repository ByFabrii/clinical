# =================================================================
# CONFIGURACIÓN DE VARIABLES DE ENTORNO - SISTEMA DENTAL
# =================================================================
# 
# INSTRUCCIONES:
# 1. Copia este archivo como .env
# 2. Completa todas las variables con tus valores reales
# 3. NUNCA subas el archivo .env a git (está en .gitignore)
# 4. Mantén estas variables seguras y privadas
#
# =================================================================

# -----------------------------------------------------------------
# CONFIGURACIÓN DEL SERVIDOR
# -----------------------------------------------------------------
# Puerto donde correrá el servidor (por defecto 3001 para no conflicto con React)
PORT=3001

# Entorno de ejecución (development, production, test)
NODE_ENV=development

# -----------------------------------------------------------------
# CONFIGURACIÓN DE SUPABASE
# -----------------------------------------------------------------
# URL de tu proyecto Supabase (ejemplo: https://abcdefghijklmnop.supabase.co)
SUPABASE_URL=your_supabase_project_url_here

# Clave pública de Supabase (anon key)
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Clave de servicio de Supabase (service_role key) - SOLO PARA BACKEND
# ⚠️  CRÍTICO: Esta clave tiene permisos completos, manténla segura
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# -----------------------------------------------------------------
# CONFIGURACIÓN JWT (JSON Web Tokens)
# -----------------------------------------------------------------
# Secreto para firmar tokens JWT (genera uno único y seguro)
# Puedes usar: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_here_minimum_32_characters

# Tiempo de expiración de tokens (ejemplos: 1h, 24h, 7d, 30d)
JWT_EXPIRES_IN=24h

# Tiempo de expiración de refresh tokens
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------
# CONFIGURACIÓN DE SEGURIDAD
# -----------------------------------------------------------------
# Secreto para encriptar datos sensibles (bcrypt rounds)
BCRYPT_ROUNDS=12

# Dominios permitidos para CORS (separados por comas)
# Ejemplo: http://localhost:3000,https://tu-dominio.com
CORS_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------
# CONFIGURACIÓN DE RATE LIMITING
# -----------------------------------------------------------------
# Número máximo de requests por ventana de tiempo
RATE_LIMIT_MAX=100

# Ventana de tiempo en minutos
RATE_LIMIT_WINDOW_MS=15

# -----------------------------------------------------------------
# CONFIGURACIÓN DE LOGGING
# -----------------------------------------------------------------
# Nivel de logging (error, warn, info, debug)
LOG_LEVEL=info

# Directorio donde guardar logs
LOG_DIR=logs

# -----------------------------------------------------------------
# CONFIGURACIÓN DE ARCHIVOS/IMÁGENES
# -----------------------------------------------------------------
# Tamaño máximo de archivos en MB
MAX_FILE_SIZE_MB=10

# Tipos de archivos permitidos (separados por comas)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/dicom

# -----------------------------------------------------------------
# CONFIGURACIÓN DE EMAIL (OPCIONAL - para notificaciones)
# -----------------------------------------------------------------
# Configuración SMTP para envío de emails
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USER=tu-email@gmail.com
# EMAIL_PASS=tu-password-de-aplicacion
# EMAIL_FROM=noreply@tu-clinica.com

# -----------------------------------------------------------------
# CONFIGURACIÓN DE CUMPLIMIENTO NORMATIVO
# -----------------------------------------------------------------
# Habilitar auditoría completa (true/false)
ENABLE_AUDIT_LOGGING=true

# Retención de logs de auditoría en días
AUDIT_LOG_RETENTION_DAYS=2555  # 7 años según NOM-024

# Habilitar encriptación de datos sensibles
ENABLE_DATA_ENCRYPTION=true

# -----------------------------------------------------------------
# CONFIGURACIÓN DE DESARROLLO (SOLO EN DEVELOPMENT)
# -----------------------------------------------------------------
# Habilitar logs detallados de SQL
ENABLE_SQL_LOGGING=false

# Habilitar CORS para todos los orígenes (SOLO EN DESARROLLO)
ENABLE_CORS_ALL=false

# Habilitar datos de prueba
ENABLE_SEED_DATA=true

# -----------------------------------------------------------------
# CONFIGURACIÓN ESPECÍFICA PARA VERCEL (PRODUCCIÓN)
# -----------------------------------------------------------------
# URL base de la aplicación en producción
# Ejemplo: https://tu-app.vercel.app
VERCEL_URL=

# URL del frontend en producción (para CORS)
# Ejemplo: https://tu-frontend.vercel.app
FRONTEND_URL=

# Región de Vercel (iad1, sfo1, etc.)
VERCEL_REGION=iad1

# Configuración de timeout para funciones serverless (en segundos)
FUNCTION_TIMEOUT=30

# Habilitar modo serverless optimizado
SERVERLESS_MODE=true

# -----------------------------------------------------------------
# CONFIGURACIÓN DE MONITOREO Y ANALYTICS (PRODUCCIÓN)
# -----------------------------------------------------------------
# Clave de API para servicios de monitoreo (opcional)
# MONITORING_API_KEY=your_monitoring_service_key

# Habilitar métricas de performance
ENABLE_PERFORMANCE_METRICS=true

# Habilitar reportes de errores
ENABLE_ERROR_REPORTING=true

# -----------------------------------------------------------------
# CONFIGURACIÓN DE CACHE (PRODUCCIÓN)
# -----------------------------------------------------------------
# Tiempo de cache para respuestas estáticas (en segundos)
CACHE_TTL=3600

# Habilitar cache de respuestas API
ENABLE_API_CACHE=true

# =================================================================
# NOTAS IMPORTANTES:
# =================================================================
#
# 1. SUPABASE_URL: Obtén esto de tu dashboard de Supabase
# 2. SUPABASE_ANON_KEY: Clave pública, segura para frontend
# 3. SUPABASE_SERVICE_ROLE_KEY: Clave privada, SOLO para backend
# 4. JWT_SECRET: Debe ser único y seguro (mínimo 32 caracteres)
# 5. CORS_ORIGIN: Especifica dominios exactos en producción
# 6. Todas las claves deben mantenerse privadas y seguras
# 7. En producción, usa variables de entorno del hosting
# 8. VERCEL_URL: Se configura automáticamente por Vercel
# 9. FRONTEND_URL: Debe coincidir con tu dominio de frontend
# 10. Para Vercel, configura las variables en el dashboard
#
# =================================================================
#
# CONFIGURACIÓN PARA VERCEL:
# --------------------------
# 1. Ve a tu proyecto en vercel.com
# 2. Settings > Environment Variables
# 3. Agrega todas las variables necesarias
# 4. Separa por entornos: Development, Preview, Production
# 5. Nunca expongas claves privadas en el código
#
# =================================================================